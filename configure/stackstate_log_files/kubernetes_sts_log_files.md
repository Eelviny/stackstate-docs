# StackState log files - Kubernetes

In a Kubernetes setup, StackState stores log files across the running pods. You can access recent logs using 'kubectl', although for long term storage it is recommended to set up log aggregation.

In a Kubernetes setup, StackState stores log files [across the running pods](#find-stackstate-logs-on-kubernetes-pods). You can [access recent logs](#access-recent-logs) using 'kubectl', although for long term storage it is recommended to set up [log aggregation](#log-aggregation).

## Access recent logs

The most recent logs can be retrieved from Kubernetes using the [kubectl logs command](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#logs). For example:
```
# Snapshot of logs for all containers of <pod-name>
kubectl logs <pod-name> --all-containers=true

# Stream logs for all containers of <pod-name>
kubectl logs -f <pod-name> --all-containers=true

# Snapshot of logs for a specific container of <pod-name>
kubectl logs -c <container-name> <pod-name>

# Snapshot of logs for previous terminated container of <pod-name>
kubectl logs -p -c <container-name> <pod-name>
```

You can use the **???** to locate specific log information in a log snapshot. For example:

```
# Using grep (Linux)
kubectl logs <pod-name> | grep "???" > relevant-log-output.txt

```

## Find StackState logs on Kubernetes pods

StackState logs are stored across the running pods. The table below shows the pod names to access for logs relating to specific StackState functions.

| StackState function | Pod name  |
|:---|:---|
| API (including topology, charts and settings) | `stackstate-server` |
| Checks | `stackstate-server` |
| Data indexing into Elasticsearch | `stackstate-mm2es` (metrics)<br>`stackstate-e2es` (events)<br>`stackstate-trace2es` (traces)<br>`stackstate-sts2es` (events generated by StackState) |
| Data ingestion | `stackstate-receiver` |
| Event handlers | `stackstate-server` |
| State propagation | `stackstate-server` |
| Synchronization | `stackstate-server` |
| View health state | `stackstate-server` |

You can access logs on a specific pod the [kubectl logs command](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#logs). For example:

```
kubectl logs stackstate-server
```

{% hint style="danger" %}
Note that logs stored on pods will be regularly removed. For long term access to logs, it is advised that you set up [log aggregation](#log-aggregation) for your Kubernetes cluster.
{% endhint %}


## Log aggregation

For long term storage of StackState log data, it is advised that you set up log aggregation on your Kubernetes cluster. This can be done using a third party system, such as Elasticsearch, Splunk or logz.io

**!!!EXAMPLE??!**
